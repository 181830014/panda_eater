Created attachment 154290 [details]
email thread on this topic

A write connection is released upon set rollback-only. Afterwards, it is
switched to a non-transactional read-connection. Changes flushed previously in
the same transaction cannot be read after set rollback only.

It is sugested to postpone switching to the non-transactional connection until
after-completion.