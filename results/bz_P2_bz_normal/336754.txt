If a collection mapping uses a mapped key using a 1-1 or aggregate, it needs to cascade the pre/postInsert/Update/Delete mapping events into the mapping.  Although CollectionMapping seems to do this, most subclasses override these methods and don't seem to do it.

This could lead to constraint issues, or missed writes/delete for aggregate relationships.

Also the new code for handling deletion cycles does not account for mapped keys.  Not sure if our constraint dependencies do either.