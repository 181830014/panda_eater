Hi. While going through the code I came across this method (EntityManagerFactoryProvider.keepSpecifiedProperties()):

/**
     * target contains the entries from source with keysToBeKept. 
     * @param source 
     * @param keysToBeKept 
     * @return the target object
     */
public static Map keepSpecifiedProperties(Map source, Collection keysToBeKept){
        Map target = new HashMap();
        if (source != null){
            target.putAll(source);
            Iterator<Map.Entry> it = source.entrySet().iterator();
            while(it.hasNext()) {
                Map.Entry entry = it.next();
                if(keysToBeKept.contains(entry.getKey())) {
                    target.put(entry.getKey(), entry.getValue());
                }
            }
        }
        return target;
    }

Judging by the javadoc and the name of the method, it should fill target only with properties that are in the keysToBeKept collection. However, the call to 'target.putAll(source)' just before the loop results in the target map not caring what keys are to be preserved. The only result of this call is to create another instance of the map with the same set of properties.
I don't know exactly what this method is for and what it should do, but it seems it doesn't do it correctly. The provider works fine, so this is very minor, but a possible piece of code to clean up.

Regards,
szczyp