If an XPath statement is broken across multiple lines, it is being marked as invalid.

The XSL style sheet has the following entities defined at the top.

<!DOCTYPE xsl:stylesheet [
<!ENTITY lowercase "'abcdefghijklmnopqrstuvwxyz'">
<!ENTITY uppercase "'ABCDEFGHIJKLMNOPQRSTUVWXYZ'">
 ]>


The entities are used further down in the stylesheet.

          <xsl:value-of select="concat('image/', 
            translate($format, &uppercase;, &lowercase;))"/>

We may want to introduce a refactoring that would allow for the entities to be converted to variables, as you can accomplish the same thing with variables.