When adding a unique constraint like  db.users.ensureIndex({username: 1}, {unique: true}) the entity manager just ignores this when persisting an entry with a conflicting username.